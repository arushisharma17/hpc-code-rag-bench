/*****************************************************************************/\n/*IMPORTANT:  READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.         */\n/*By downloading, copying, installing or using the software you agree        */\n/*to this license.  If you do not agree to this license, do not download,    */\n/*install, copy or use the software.                                         */\n/*                                                                           */\n/*                                                                           */\n/*Copyright (c) 2005 Northwestern University                                 */\n/*All rights reserved.                                                       */\n\n/*Redistribution of the software in source and binary forms,                 */\n/*with or without modification, is permitted provided that the               */\n/*following conditions are met:                                              */\n/*                                                                           */\n/*1       Redistributions of source code must retain the above copyright     */\n/*        notice, this list of conditions and the following disclaimer.      */\n/*                                                                           */\n/*2       Redistributions in binary form must reproduce the above copyright   */\n/*        notice, this list of conditions and the following disclaimer in the */\n/*        documentation and/or other materials provided with the distribution.*/ \n/*                                                                            */\n/*3       Neither the name of Northwestern University nor the names of its    */\n/*        contributors may be used to endorse or promote products derived     */\n/*        from this software without specific prior written permission.       */\n/*                                                                            */\n/*THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS ``AS    */\n/*IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED      */\n/*TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT AND         */\n/*FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL          */\n/*NORTHWESTERN UNIVERSITY OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,       */\n/*INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES          */\n/*(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR          */\n/*SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)          */\n/*HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,         */\n/*STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN    */\n/*ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE             */\n/*POSSIBILITY OF SUCH DAMAGE.                                                 */\n/******************************************************************************/\n/*************************************************************************/\n/**   File:         cluster.c                                           **/\n/**   Description:  Takes as input a file, containing 1 data point per  **/\n/**                 per line, and performs a fuzzy c-means clustering   **/\n/**                 on the data. Fuzzy clustering is performed using    **/\n/**                 min to max clusters and the clustering that gets    **/\n/**                 the best score according to a compactness and       **/\n/**                 separation criterion are returned.                  **/\n/**   Author:  Brendan McCane                                           **/\n/**            James Cook University of North Queensland.               **/\n/**            Australia. email: mccane@cs.jcu.edu.au                   **/\n/**                                                                     **/\n/**   Edited by: Jay Pisharath, Wei-keng Liao                           **/\n/**              Northwestern University.                               **/\n/**                                                                     **/\n/**   ================================================================  **/\n/**																		**/\n/**   Edited by: Sang-Ha  Lee											**/\n/**				 University of Virginia									**/\n/**																		**/\n/**   Description:	No longer supports fuzzy c-means clustering;	 	**/\n/**					only regular k-means clustering.					**/\n/**					Simplified for main functionality: regular k-means	**/\n/**					clustering.											**/\n/**                                                                     **/\n/*************************************************************************/\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <limits.h>\n#include <math.h>\n#include <float.h>\n#include <omp.h>\n\n#include "kmeans.h"\n\n\n/*---< cluster() >-----------------------------------------------------------*/\nint cluster(int      numObjects,      /* number of input objects */\n            int      numAttributes,   /* size of attribute of each object */\n            float  **attributes,      /* [numObjects][numAttributes] */            \n            int      nclusters,\n            float    threshold,       /* in:   */\n            float ***cluster_centres /* out: [best_nclusters][numAttributes] */\n    \n            )\n{\n    int    *membership;\n    float **tmp_cluster_centres;\n\n    membership = (int*) malloc(numObjects * sizeof(int));\n   \n    srand(7);\n	/* perform regular Kmeans */\n    tmp_cluster_centres = kmeans_clustering(attributes,\n                                            numAttributes,\n                                            numObjects,\n                                            nclusters,\n                                            threshold,\n                                            membership);      \n	\n    if (*cluster_centres) {\n		free((*cluster_centres)[0]);\n        free(*cluster_centres);\n    }\n    *cluster_centres = tmp_cluster_centres;\n\n   \n	free(membership);\n\n    return 0;\n}\n\n